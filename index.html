<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vito's Daily Log</title>

  <style>
    body {
      font-family: system-ui, sans-serif;
      padding: 20px;
      background: #f5f5f5;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #006b80;
    }
    h2 {
      margin-top: 20px;
      margin-bottom: 8px;
      font-size: 1.1rem;
      color: #006b80;
    }
    .section {
      background: white;
      padding: 16px;
      border-radius: 10px;
      margin-bottom: 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.06);
    }
    label { display: block; margin: 6px 0; font-size: 0.95rem; }
    input, textarea, select {
      width: 100%; padding: 8px; margin-top: 4px;
      border-radius: 6px; border: 1px solid #ccc; font-size: 0.95rem;
    }
    textarea { resize: vertical; }
    .flavour-group-title { margin-top: 10px; font-weight: 600; }
    .flavour-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 4px 10px;
      margin-top: 6px;
    }
    button {
      background: #006b80; color: white;
      padding: 14px 20px; border: none; border-radius: 8px;
      margin-top: 10px; width: 100%; font-size: 17px;
      cursor: pointer; font-weight: 600;
    }
  </style>
</head>

<body>

<h1>Vito's Daily Log</h1>

<div class="section">
  <h2>Date</h2>
  <input type="date" id="Date">
</div>

<div class="section">
  <h2>Day Details</h2>

  <label>Opening Time <input type="time" id="Opening Time"></label>
  <label>Closing Time <input type="time" id="Closing Time"></label>
  <label>Cash Start <input type="number" id="Cash Start"></label>
  <label>Cash End <input type="number" id="Cash End"></label>
  <label>Weather Visual <input type="text" id="Weather Visual"></label>
  <label>Weather Max (째C) <input type="number" id="Weather Max (째C)"></label>
  <label>Weather Min (째C) <input type="number" id="Weather Min (째C)"></label>
  <label>Rain (mm) <input type="number" id="Rain (mm)"></label>
  <label>Wind (km/h) <input type="number" id="Wind (km/h)"></label>
  <label>Tide Info <input type="text" id="Tide Info"></label>
</div>

<div class="section">
  <h2>Special Event</h2>
  <label>Special Event?
    <select id="Special Event?">
      <option>No</option>
      <option>Yes</option>
    </select>
  </label>
  <label>Event Name <input type="text" id="Event Name"></label>
</div>

<div class="section">
  <h2>Notes</h2>
  <textarea id="Notes" rows="3"></textarea>
</div>

<div class="section">
  <h2>Flavours Available</h2>

  <div class="flavour-group-title">Permanent</div>
  <div class="flavour-list">
    <label><input type="checkbox" class="flav" value="Biscoff"> Biscoff</label>
    <label><input type="checkbox" class="flav" value="Black Sand Piha"> Black Sand Piha</label>
    <label><input type="checkbox" class="flav" value="Dark Choco Brownie"> Dark Choco Brownie</label>
    <label><input type="checkbox" class="flav" value="Dulce de Leche"> Dulce de Leche</label>
    <label><input type="checkbox" class="flav" value="Hazelnut Crunch"> Hazelnut Crunch</label>
    <label><input type="checkbox" class="flav" value="Mango Bliss"> Mango Bliss</label>
    <label><input type="checkbox" class="flav" value="Menta Cioccolato"> Menta Cioccolato</label>
    <label><input type="checkbox" class="flav" value="Reese's Peanut Butter"> Reese's Peanut Butter</label>
    <label><input type="checkbox" class="flav" value="Strawberry Dream"> Strawberry Dream</label>
    <label><input type="checkbox" class="flav" value="Vanilla Oreo"> Vanilla Oreo</label>
  </div>

  <div class="flavour-group-title">Specials</div>
  <div class="flavour-list">
    <label><input type="checkbox" class="flav" value="Amarena"> Amarena</label>
    <label><input type="checkbox" class="flav" value="Banana Caramel"> Banana Caramel</label>
    <label><input type="checkbox" class="flav" value="Cookie Crumble"> Cookie Crumble</label>
    <label><input type="checkbox" class="flav" value="Chocolate Velvet"> Chocolate Velvet</label>
    <label><input type="checkbox" class="flav" value="Lemon Cake Delight"> Lemon Cake Delight</label>
    <label><input type="checkbox" class="flav" value="Moka"> Moka</label>
    <label><input type="checkbox" class="flav" value="Pineapple Paradise"> Pineapple Paradise</label>
    <label><input type="checkbox" class="flav" value="Simply Coconut"> Simply Coconut</label>
    <label><input type="checkbox" class="flav" value="Salted White"> Salted White</label>
  </div>
</div>

<button onclick="saveLog()">Save Daily Log</button>

<script>
  // Default date today
  document.getElementById("Date").value = new Date().toISOString().slice(0, 10);

  function saveLog() {
    const data = {};

    // collect non-checkbox inputs
    document.querySelectorAll("input, textarea, select").forEach(el => {
      if (el.type === "checkbox") return;
      if (!el.id) return;
      data[el.id] = el.value;
    });

    // collect flavours
    document.querySelectorAll(".flav").forEach(box => {
      data[box.value] = box.checked ? "Yes" : "";
    });

    if (!data["Date"]) {
      alert("Please select a date.");
      return;
    }

    google.script.run
      .withSuccessHandler(msg => alert("Saved!"))
      .withFailureHandler(err => alert("ERROR: " + err.message))
      .saveDailyLog(data);
  }
</script>

</body>
</html>
