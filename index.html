<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Vito's Daily Log</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f0ec;
        margin: 20px;
    }
    h2 { margin-top: 30px; }
    label { display: block; margin: 5px 0; }
    .section {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
    }
    button {
        width: 100%;
        padding: 15px;
        font-size: 18px;
        background: #066a82;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
    }
</style>

</head>
<body>

<h1>Vito's Daily Log</h1>

<div class="section">
    <h2>Weather</h2>
    <label>Date <input type="date" id="date" /></label>
    <label>Weather Visual <input type="text" id="weatherVisual" /></label>
    <label>Weather Max <input type="number" id="weatherMax" /></label>
    <label>Weather Min <input type="number" id="weatherMin" /></label>
    <label>Rain (mm) <input type="number" id="rainMm" /></label>
    <label>Wind (km/h) <input type="number" id="windKm" /></label>
    <label>Tide Info <input type="text" id="tideInfo" /></label>
</div>

<div class="section">
    <h2>Flavours Available</h2>

    <h3>Permanent</h3>
    <label><input type="checkbox" class="flavour" data-name="Biscoff"> Biscoff</label>
    <label><input type="checkbox" class="flavour" data-name="Black Sand Piha"> Black Sand Piha</label>
    <label><input type="checkbox" class="flavour" data-name="Dark Choco Brownie"> Dark Choco Brownie</label>
    <label><input type="checkbox" class="flavour" data-name="Dulce de Leche"> Dulce de Leche</label>
    <label><input type="checkbox" class="flavour" data-name="Hazelnut Crunch"> Hazelnut Crunch</label>
    <label><input type="checkbox" class="flavour" data-name="Mango Bliss"> Mango Bliss</label>
    <label><input type="checkbox" class="flavour" data-name="Menta Cioccolato"> Menta Cioccolato</label>
    <label><input type="checkbox" class="flavour" data-name="Reese's Peanut Butter"> Reese's Peanut Butter</label>
    <label><input type="checkbox" class="flavour" data-name="Strawberry Dream"> Strawberry Dream</label>
    <label><input type="checkbox" class="flavour" data-name="Vanilla Oreo"> Vanilla Oreo</label>

    <h3>Specials</h3>
    <label><input type="checkbox" class="flavour" data-name="Amarena"> Amarena</label>
    <label><input type="checkbox" class="flavour" data-name="Banana Caramel"> Banana Caramel</label>
    <label><input type="checkbox" class="flavour" data-name="Cookie Crumble"> Cookie Crumble</label>
    <label><input type="checkbox" class="flavour" data-name="Chocolate Velvet"> Chocolate Velvet</label>
    <label><input type="checkbox" class="flavour" data-name="Lemon Cake Delight"> Lemon Cake Delight</label>
    <label><input type="checkbox" class="flavour" data-name="Moka"> Moka</label>
    <label><input type="checkbox" class="flavour" data-name="Pineapple Paradise"> Pineapple Paradise</label>
    <label><input type="checkbox" class="flavour" data-name="Simply Coconut"> Simply Coconut</label>
    <label><input type="checkbox" class="flavour" data-name="Salted White"> Salted White</label>
</div>

<div class="section">
    <h2>Special Event</h2>
    <label><input type="radio" name="event" value="No" checked> No</label>
    <label><input type="radio" name="event" value="Yes"> Yes</label>

    <label>Event Name <input type="text" id="eventName" /></label>
    <label>Notes <textarea id="notes"></textarea></label>
</div>

<button onclick="saveLog()">Save Daily Log</button>

<script>
async function saveLog() {

    const data = {
        "Date": document.getElementById("date").value,
        "Weather Visual": document.getElementById("weatherVisual").value,
        "Weather Max (°C)": document.getElementById("weatherMax").value,
        "Weather Min (°C)": document.getElementById("weatherMin").value,
        "Rain (mm)": document.getElementById("rainMm").value,
        "Wind (km/h)": document.getElementById("windKm").value,
        "Tide Info": document.getElementById("tideInfo").value,
        "Special Event?": document.querySelector("input[name='event']:checked").value,
        "Event Name": document.getElementById("eventName").value,
        "Notes": document.getElementById("notes").value,

        // Flavours — TRUE / FALSE per spreadsheet header
        "Biscoff": false, "Black Sand Piha": false, "Dark Choco Brownie": false,
        "Dulce de Leche": false, "Hazelnut Crunch": false, "Mango Bliss": false,
        "Menta Cioccolato": false, "Reese's Peanut Butter": false,
        "Strawberry Dream": false, "Vanilla Oreo": false,
        "Amarena": false, "Banana Caramel": false, "Cookie Crumble": false,
        "Chocolate Velvet": false, "Lemon Cake Delight": false,
        "Moka": false, "Pineapple Paradise": false,
        "Simply Coconut": false, "Salted White": false
    };

    // fill flavour selections
    document.querySelectorAll(".flavour").forEach(f => {
        if (f.checked) data[f.dataset.name] = true;
    });

    // Send to Google Apps Script without CORS preflight
    fetch("https://script.google.com/macros/s/AKfycbwJn9-SI8lC6earo5TzOSEErvn-xj9fMpQJDcQzI9SeC1xyg90I8EV6aGtw-MNZsGJE/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ data })
    });

    alert("Saved!");
}
</script>

</body>
</html>
