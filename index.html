<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vito's Daily Log</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background:#f5f5f5; }
    h2 { margin-top: 30px; }
    .section { background:white; padding:20px; border-radius:8px; margin-bottom:20px; }
    label { display:block; margin:6px 0; }
    .row { margin-bottom:10px; }
    button { 
      background:#006b80; 
      color:white; 
      padding:15px 25px; 
      border:none; 
      border-radius:6px; 
      font-size:18px; 
      cursor:pointer;
      width:100%;
    }
  </style>
</head>

<body>

<h1>Vito's Daily Log</h1>

<div class="section">
  <h2>Date</h2>
  <input type="date" id="date" />
</div>

<div class="section">
  <h2>Weather</h2>

  <label>Max Temp <input type="number" id="max" /></label>
  <label>Min Temp <input type="number" id="min" /></label>
  <label>Rain (mm) <input type="number" id="rain" /></label>
  <label>Wind (km/h) <input type="number" id="wind" /></label>

  <label>Weather notes</label>
  <textarea id="notes" rows="3" style="width:100%;"></textarea>
</div>

<div class="section">
  <h2>Flavours Available</h2>

  <h3>Permanent</h3>
  <label><input type="checkbox" class="flavour" value="Biscoff"> Biscoff</label>
  <label><input type="checkbox" class="flavour" value="Black Sand Piha"> Black Sand Piha</label>
  <label><input type="checkbox" class="flavour" value="Dark Choco Brownie"> Dark Choco Brownie</label>
  <label><input type="checkbox" class="flavour" value="Dulce de Leche"> Dulce de Leche</label>
  <label><input type="checkbox" class="flavour" value="Hazelnut Crunch"> Hazelnut Crunch</label>
  <label><input type="checkbox" class="flavour" value="Mango Bliss"> Mango Bliss</label>
  <label><input type="checkbox" class="flavour" value="Menta Cioccolato"> Menta Cioccolato</label>
  <label><input type="checkbox" class="flavour" value="Reese's Peanut Butter"> Reese's Peanut Butter</label>
  <label><input type="checkbox" class="flavour" value="Strawberry Dream"> Strawberry Dream</label>
  <label><input type="checkbox" class="flavour" value="Vanilla Oreo"> Vanilla Oreo</label>

  <h3>Specials</h3>
  <label><input type="checkbox" class="flavour" value="Amarena"> Amarena</label>
  <label><input type="checkbox" class="flavour" value="Banana Caramel"> Banana Caramel</label>
  <label><input type="checkbox" class="flavour" value="Cookie Crumble"> Cookie Crumble</label>
  <label><input type="checkbox" class="flavour" value="Chocolate Velvet"> Chocolate Velvet</label>
  <label><input type="checkbox" class="flavour" value="Lemon Cake Delight"> Lemon Cake Delight</label>
  <label><input type="checkbox" class="flavour" value="Moka"> Moka</label>
  <label><input type="checkbox" class="flavour" value="Pineapple Paradise"> Pineapple Paradise</label>
  <label><input type="checkbox" class="flavour" value="Simply Coconut"> Simply Coconut</label>
  <label><input type="checkbox" class="flavour" value="Salted White"> Salted White</label>
</div>

<div class="section">
  <h2>Special Event?</h2>
  <label><input type="radio" name="event" value="No" checked> No</label>
  <label><input type="radio" name="event" value="Yes"> Yes</label>

  <label>Event Name</label>
  <input type="text" id="eventName" style="width:100%;" />
</div>

<button onclick="saveLog()">Save Daily Log</button>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyqp-Ft5FaP858x4WX5ArW4LRZQPk_ByvBxd0ICITQlr9uZxrnNDu-O4lMKeL2s3ipd/exec";

async function saveLog() {
  const date = document.getElementById("date").value;
  if (!date) {
    alert("Please select a date.");
    return;
  }

  const flavours = [...document.querySelectorAll(".flavour")]
      .filter(f => f.checked)
      .map(f => f.value);

  const payload = {
    Date: date,
    Max: document.getElementById("max").value,
    Min: document.getElementById("min").value,
    Rain: document.getElementById("rain").value,
    Wind: document.getElementById("wind").value,
    WeatherNotes: document.getElementById("notes").value,
    Event: document.querySelector('input[name="event"]:checked').value,
    EventName: document.getElementById("eventName").value,
    Flavours: flavours.join(", ")
  };

  try {
    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ data: payload })
    });

    alert("Saved!");
  } catch (err) {
    alert("Failed to save log.");
  }
}
</script>

</body>
</html>
